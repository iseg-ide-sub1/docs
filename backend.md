# 后端-数据处理

主要五个模块：**预处理、模式识别、日志总结、意图预测、能力分析**

向上提供能力：日志总结、意图预测、能力分析

## 预处理

插件前端收集数据时进行简单的合并处理，形成raw_data。在预处理模块进一步处理：

1. **基于粘度的操作合并**：不一定在这一步弄，宗旨是保证在模式识别支持的步长内，装得下足够丰富的信息，而不是过于单一类型的序列，这个粘度其实和模式识别差不多，可以放到后面。
2. **event_type转换**：前端收集的事件类型基于API，非常多，能进一步总结
3. **剔除冗余数据**：看数据集情况
4. **形成历史操作件a_history**：用于后续的预测检索
5. **形成历史命令c_history**：用于后续的预测检索

## 模式识别

根据程序员开发过程中普遍的几种行为类型，初版原型工具设定如下几种固定的模式/状态，状态内的操作都有明显的类型倾向：

1. **配置环境**：执行的命令类型多为install、可能出现静态检查问题、操作的文件多为配置文件
2. **调查阅读**：鼠标滚轮滑动、选中文本但不编辑、文件跳转、代码符号跳转、搜索事件密集，编辑操作少
3. **编写内容**：一段时间内主要事件都是文本变化，可能包含少量的其他操作
4. **执行验证**：频繁执行命令和调试，可能配合少量编辑操作，原因复杂，这种情况可能是在调整运行效果、验证某些功能，也可能是在修复某些问题，直接原因可能来自调试输出或终端也可能不是，因此统称为“验证”
5. **未知**：不属于任何一类模式，单纯就是在IDE里但是什么都没做。你不能指望程序员无时无刻不知道自己该干什么，程序员自己都不知道该干什么时，我们更不知道。

| 方案                                                         | 输入                   | 输出 |
| ------------------------------------------------------------ | ---------------------- | ---- |
| CFC液态神经网络（offline）<br />预训练模型，分类固定，不随使用而更新<br />特征编码：[预处理转换的event_type, 环境反馈类型, ref关系] | 预处理过的动作数据序列 | 模式 |

## 日志总结

提供日志总结功能，总结程序员最近在干什么事，干的内容是什么，具体包括：

1. **工作模式**：调用模式识别模块
2. **聚焦位置**：repo中程序员当前关注的位置，包括不限于文件、行号范围、相关符号等

| 方案   | 输入                   | 输出          |
| ------ | ---------------------- | ------------- |
| 规则？ | 预处理过的动作数据序列 | 模式+聚焦位置 |

## 意图预测

预测开发者的意图，具体包括：

1. **工作模式**：调用模式识别模块
2. **操作**：操作对象、命令

| 方案                                                         | 输入                   | 输出      |
| ------------------------------------------------------------ | ---------------------- | --------- |
| 规则+检索(先尝试简单模型，online，增量式学习，实时更新)<br />根据不同的工作模式，设置不同的检索方案。<br />1. **配置环境**：不仅包含a_history的检索结果，还提供c_history中有关命令，配置文件等<br />2. **调查阅读**：不仅包含a_history的检索结果，视情况还提供项目README、与a_history正在研究的东西有关的依赖项<br />3. **编写内容**：包含a_history的检索结果<br />4. **执行验证**：不仅包含a_history的检索结果，视情况提供历史命令、traceback中提到的有关操作件<br />5. **未知**：包含a_history的检索结果 | 预处理过的动作数据序列 | 模式+操作 |

## 能力分析

以后再想

