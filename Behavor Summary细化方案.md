# Behavor Summary细化方案

设计每个模式下要总结的内容模板：

[TOC]

### 环境配置[Configuration]

内容：

1. 添加的依赖包和版本+是否成功
2. 配置的项目参数和指标
3. 使用的工具链和框架

方案：

1. 规则匹配历史命令：pip/conda/npm/cnpm./yarn install xxx
2. 读取packages.json：检测修改过的包+版本号
3. 读取BUILD.gn/CMakeLists.txt等编译脚本：检测引用的包
4. 读取其他项目配置文件或特殊命令，根据支持的项目类型进行规则适配

### 调查阅读[View]

内容：

1. 重点关注的文档+行号范围
2. 重点关注的内容的摘要

方案：

1. 频度统计最近最常浏览的范围
2. 从前端获取这些文档的内容，调用LLM总结这些范围的摘要

### 编写代码[Coding]

内容：

1. 重点编辑的源代码+行号范围
2. 重点编辑过的代码变更摘要

方案：

1. 频度统计最近最常编辑代码文件
2. 如果是git仓库：先git log 重点源代码获得修改记录过滤出最近时间的commit内容，然后git diff HEAD获得最近未commit的更改记录，综合得到重点源代码文件的变更记录
3. 如果不是git仓库：回溯操作，从某个时间点阈值开始回溯式合并文件变更操作，形成文本变更记录
4. 前端获得变更记录后，调用LLM总结这些变更的摘要

### 执行验证[Execution]

内容：

1. 经常执行过的命令+是否成功
2. 伴随执行操作而修改过的代码变更摘要

方案：

1. 频度统计最近最常执行的命令
2. 读取对应的命令行输出，判断是否成功，如果不成功，摘出traceback
3. 代码变更摘要参考前面方案

### 未知/自定义[Unknown]

内容：

1. 重点编辑的源代码+行号范围
2. 经常执行过的命令+是否成功

方案同上。

